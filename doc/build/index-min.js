KISSY.add("kg/slider/1.0.0/index",["base","dd","node"],function(e,a,t,s){var i,r=a("base"),l=a("dd"),n=a("node");i=function(e){var a=n.all,t=r,s=l,i={typeOf:function(e){return toString.apply(e).replace(/^\[\w*\s*|\]$/gi,"")},isPercent:function(e){return/^\d{1,3}%$/.test(e)},emptyEventFunc:function(){}};!function(){var e,a,t,i,r,l,n,c,d,o,_,h,u,v,b,p,m,f,g,k,y,w,$,x,O,z,I=s.DDM,C=null,M=null,E=null;I.on("dragstart",function(e){e.halt(),E=e.drag.get("node"),C=E.__self__,M=C.$slider,u=C.readOnly_,v=C.disabled_,u||v||(b=C.orientation_,r=C.$slider.outerWidth(),l=C.$slider.outerHeight(),n=C.$slider_track.outerWidth(),c=C.$slider_track.outerHeight(),d=E.outerWidth(),o=E.outerHeight(),_=C.$slider.offset().left,h=C.$slider.offset().top,p=C.type_,m=C.step_,f=C.min_,g=C.max_,C.fire("start"))}).on("drag",function(s){if(!u&&!v){switch(s.halt(),e=parseInt(s.pageX-_-d/2),a=n-e,t=parseInt(s.pageY-h-o/2),i=c-t,b){case"horizontal":if(0===m)switch(p){case"value":case"min":C._pos(e);break;case"max":C._pos(a)}else switch(k=Math.abs((g-f)/n),y=Math.abs(f/k),w=parseInt(m/k+y),p){case"value":case"min":$=parseInt(E.css("left")),$-w>e&&C._pos($-w),e>$+w&&C._pos($+w);break;case"max":x=parseInt(E.css("right")),x-w>a&&C._pos(x-w),a>x+w&&C._pos(x+w)}break;case"vertical":if(0===m)switch(p){case"value":case"min":C._pos(i);break;case"max":C._pos(t)}else switch(k=Math.abs((g-f)/c),y=Math.abs(f/k),w=parseInt(m/k+y),p){case"value":case"min":z=parseInt(E.css("bottom")),z-w>i&&C._pos(z-w),i>z+w&&C._pos(z+w);break;case"max":O=parseInt(E.css("top")),O-w>t&&C._pos(O-w),t>O+w&&C._pos(O+w)}}C.fire("slide")}}).on("dragend",function(e){u||v||(e.halt(),C.fire("stop"),C=M=E=null)})}();var c=t.extend({initializer:function(){var e=this,t=e.selector_=e.get("selector"),r=e.cssClass_=e.get("cssClass"),l=e.orientation_=e.get("orientation"),n=e.min_=e.get("min"),c=e.max_=e.get("max"),d=e.value_=e.get("value"),o=e.type_=e.get("type"),_=(e.step_=Math.abs(e.get("step")),e.animate_=e.get("animate"),e.readOnly_=e.get("readOnly"),e.disabled_=e.get("disabled")),h=(e.hidden_=!1,e.slide_=e.get("slide")||i.emptyEventFunc),u=e.start_=e.get("start")||i.emptyEventFunc,v=e.stop_=e.get("stop")||i.emptyEventFunc,b=e.change_=e.get("change")||i.emptyEventFunc,p=e.create_=e.get("create")||i.emptyEventFunc,m=e.destroy_=e.get("destroy")||i.emptyEventFunc,f=e.$slider=e.get("$target"),g=e.$slider_handle=a(t.handle,e.$slider);e.$slider_handle.__self__=e;e.$slider_track=a(t.track,e.$slider),e.$slider_range=a(t.range,e.$slider);switch(l){case"horizontal":switch(f.addClass(r.horizontal),o){case"value":f.addClass(r.horizontal_value);break;case"min":f.addClass(r.horizontal_min);break;case"max":f.addClass(r.horizontal_max)}break;case"vertical":switch(f.addClass(r.vertical),o){case"value":f.addClass(r.vertical_value);break;case"min":f.addClass(r.vertical_min);break;case"max":f.addClass(r.vertical_max)}}e.percent_=parseInt(d/(c-n)*100),function(e){new s.Draggable({node:g,move:!1});var a=function(e,a){var t=e.value_,s=e.min_,i=e.max_,r=e.step_>0?e.step_:1,l=e.type_;switch(a){case 37:case 40:switch(l){case"value":case"min":t>s&&(t-=r);break;case"max":i>t&&(t+=r)}break;case 38:case 39:switch(l){case"value":case"min":i>t&&(t+=r);break;case"max":t>s&&(t-=r)}}return t};f.on("keydown",function(t){var s=e.readOnly_,i=e.disabled_;if(!s&&!i){var r=t.which,l=e.orientation_;switch(r){case 37:"horizontal"===l&&(e.value_=a(e,r));break;case 38:"vertical"===l&&(e.value_=a(e,r));break;case 39:"horizontal"===l&&(e.value_=a(e,r));break;case 40:"vertical"===l&&(e.value_=a(e,r))}e._value(e.value_)}}),e._accessible(),e._value(d),e._disabled(_)}(e),e.on("create",function(e){e.halt(),p.call(this,e)}).on("start",function(e){e.halt(),u.call(this,e)}).on("slide",function(e){e.halt(),h.call(this,e)}).on("stop",function(e){e.halt(),v.call(this,e)}).on("change",function(e){e.halt(),b.call(this,e)}).on("destroy",function(e){e.halt(),m.call(this,e)}),e.fire("create")},_accessible:function(e){var a=this,t=a.$slider,s=a.$slider_handle,i=a.readOnly_,r=a.disabled_,l=a.step_,n=a.hidden_;if(void 0===e)return t.attr({role:"slider",tabindex:0,"aria-readOnly":i,"aria-disabled":r,"aria-step":l,"aria-hidden":n}),void s.attr("tabindex",1);var c=a.min_,d=a.max_,o=a.percent_,_=a.value_;if(o>=0&&100>=o)switch(e){case"value":t.attr({"aria-valuemin":c,"aria-valuemax":d,"aria-valuenow":_,"aria-valuetext":_,"data-percent":o});break;case"readOnly":t.attr({"aria-readOnly":i});break;case"disabled":t.attr({"aria-disabled":r});break;case"step":t.attr({"aria-step":l});break;case"hidden":t.attr({"aria-hidden":n})}},_step:function(e){var a=this;"Number"===i.typeOf(e)&&(a.step_=Math.abs(e),a._accessible("step"))},_readOnly:function(e){var a=this;switch(e){case!0:a.readOnly_=!0;break;case!1:a.readOnly_=!1}a._accessible("readOnly")},_disabled:function(e){var a=this,t=a.$slider,s=a.cssClass_;switch(e){case!0:t.addClass(s.disabled),a.disabled_=!0;break;case!1:t.removeClass(s.disabled),a.disabled_=!1}a._accessible("disabled")},_pos:function(e){var a,t,s,i,r,l,n=this,c=n.orientation_,d=n.type_,o=n.$slider,_=n.$slider_handle,h=n.$slider_range,u=n.max_,v=n.min_;switch(c){case"horizontal":switch(i=n.$slider_track.outerWidth(),r="width",l=o.outerWidth()-_.outerWidth(),d){case"value":case"min":s="left";break;case"max":s="right"}break;case"vertical":switch(i=n.$slider_track.outerHeight(),r="height",l=o.outerHeight()-_.outerHeight(),d){case"value":case"min":s="bottom";break;case"max":s="top"}}a=Math.abs((u-v)/i),t=Math.abs(v/a),_.css(s,e),h.css(r,e),n.percent_=parseInt(e/i*100),n.value_=parseInt((e-t)*a),n._accessible("value"),0>e&&n._pos(0),e>l&&n._pos(l)},_value:function(e){var a,t,s,r,l,n,c,d,o=this,_=o.$slider_track.outerWidth(),h=o.$slider_track.outerHeight(),u=o.orientation_,v=o.type_,b=o.$slider_handle,p=o.$slider_range,m=o.max_,f=o.min_;switch(!0){case"String"===i.typeOf(e):if(!i.isPercent(e))return;a=parseInt(e.split("%")[0]),a=a>100?100:a,t=1;break;case"Number"===i.typeOf(e):f>e&&(e=f),e>m&&(e=m),t=0;break;case"Array"===i.typeOf(e):t=2}switch(u){case"horizontal":switch(c=_,d="width",v){case"value":case"min":n="left";break;case"max":n="right"}break;case"vertical":switch(c=h,d="height",v){case"value":case"min":n="bottom";break;case"max":n="top"}}switch(s=Math.abs((m-f)/c),r=Math.abs(f/s),t){case 0:l=parseInt(e/s+r),o.value_=e,o.percent_=parseInt(l/c*100);break;case 1:l=a/100*c,o.value_=parseInt((l-r)*s),o.percent_=a;break;case 2:}b.css(n,l),p.css(d,l),o._accessible("value"),o.fire("change")},hide:function(){var e=this;e.hidden_=!0,e._accessible("hidden"),e.$slider.hide()},show:function(){var e=this;e.hidden_=!1,e._accessible("hidden"),e.$slider.show()},setter:function(e,a){var t=this;switch(e){case"value":if(t.readOnly_)return;t._value(a);break;case"readOnly":t._readOnly(a);break;case"disabled":t._disabled(a);break;case"step":t._step(a)}},getter:function(e){var a,t=this;switch(e){case"value":a=t.value_;break;case"readOnly":a=t.readOnly_;break;case"disabled":a=t.disabled_}return a},destroy:function(){var e=this,a=e.$slider;e.fire("destroy"),a.remove();for(var t in e)e.hasOwnProperty(t)&&delete e[t];e.__proto__=null}},{ATTRS:{$target:{value:"",getter:function(e){return a(e)}},selector:{value:{handle:".vc-slider-handle",track:".vc-slider-track",range:".vc-slider-range"}},cssClass:{value:{horizontal_value:"vc-slider-horizontal-value",horizontal_min:"vc-slider-horizontal-min",horizontal_max:"vc-slider-horizontal-max",horizontal:"vc-slider-horizontal",vertical_value:"vc-slider-vertical-value",vertical_min:"vc-slider-vertical-min",vertical_max:"vc-slider-vertical-max",vertical:"vc-slider-vertical",disabled:"vc-slider-disabled"}},orientation:{value:"horizontal"},min:{value:0},max:{value:100},value:{value:0},type:{value:"value"},step:{value:0},animate:{value:!1},readOnly:{value:!1},disabled:{value:!1}}});return e=c}(),s.exports=i});